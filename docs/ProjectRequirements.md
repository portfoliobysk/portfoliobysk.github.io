# 要件定義書 / Project Requirements

> **ドキュメント情報**
- **バージョン**: 1.0
- **作成日**: 2025-10-30
- **作成者**: S.K
- **承認者**: S.K
- **ステータス**: 更新中

---

## 1. プロジェクト概要
- **一行サマリ**: 
- **背景**: 
- **スコープ**  
  - **含む**: 
  - **除外**: 

---

## 2. 目的とゴール
- **ビジネス目標**: 
- **KPI（計測指標）**: 
  - 例: 月間ユニークユーザー数, コンバージョン率, 平均滞在時間

---

## 3. 対象ユーザーとペルソナ
- **主なユーザー層**: 
- **代表ペルソナ 1**  
  - **名前**:  
  - **年齢層**:  
  - **利用シーン**:  
  - **課題 / 要望**:  
- **ユーザーシナリオ（主要シナリオ）**: 

---

## 4. 主要機能一覧（機能要件）
- 機能は各行でユーザーストーリー＋受け入れ基準で記載する。
- **機能 1: ユーザー登録**  
  - **説明**: ユーザーがメールで登録できる。  
  - **ユーザーストーリー**: 「私は新規ユーザーとしてメールでアカウントを作成したい、なぜなら〜だから」  
  - **受け入れ基準**: メール送信完了メールが届く; バリデーションエラー時はフィールド毎にメッセージ表示  
  - **優先度**: 高 / 中 / 低
- **機能 2: ログイン／認証**  
  - **説明**: OAuth2 / メール認証 / パスワードリセットなど  
  - **受け入れ基準**: 〜

(以下 機能を列挙)

---

## 5. 非機能要件
- **可用性**: 稼働率 99.9%  
- **パフォーマンス**: 平均ページ応答 < 500ms（キャッシュ時）  
- **スケーラビリティ**: 同時接続 2000 ユーザーを想定  
- **サポートブラウザ**: 最新Chrome, Firefox, Edge, Safari（それぞれ直近2バージョン）  
- **国際化**: 日本語 / 英語対応（要否）  
- **アクセシビリティ**: WCAG 2.1 AA 準拠  
- **ログ保管期間**: 90日  
- **データ保持ポリシー**: 

---

## 6. 業務フローとユーザージャーニー
- **主要フロー図**: （図を添付／ファイル名を記載）  
- **フロー説明**: 登録→認証→商品閲覧→注文→支払い→通知

---

## 7. 画面一覧とページ仕様
### 7.1 画面一覧
- Home
- About
- Product List
- Product Detail
- Cart
- Checkout
- My Page
- 管理画面

### 7.2 ページ仕様テンプレート（各ページにコピー）
- **ページ名**: 
- **URL**: 
- **目的**: 
- **主要ユーザー**: 
- **KPI**: 
- **主要コンテンツブロック**: 
  - ヒーロー（見出し・サブテキスト・CTA）  
  - コンテンツ領域A（説明）  
  - フッター（リンク）  
- **ワイヤー/図**: ファイル名: /06_wireframes/home.png
- **アクセシビリティ注意点**: 
- **SEOメタ**: title / description / og:image
- **実装メモ**: API: GET /products; レスポンシブ: 320-1920px
- **担当**: 
- **承認者**: 

---

## 8. 画面遷移図
- ファイル: /06_wireframes/flowchart.svg
- 説明: （主要遷移ルールやモーダル出現条件を記載）

---

## 9. データ設計
- **主要エンティティ**  
  - User: id, name, email, password_hash, created_at  
  - Product: id, name, description, price, stock, created_at  
  - Order: id, user_id, total_price, status, created_at
- **ER図**: ファイル: /09_data-model/er-diagram.svg
- **重要制約**: unique(email) for User; foreign key relations

---

## 10. API仕様
- **認証方式**: JWT / OAuth2  
- **エンドポイント例**:  
  - GET /api/products  
    - 説明: 商品一覧取得  
    - パラメータ: page, per_page, q  
    - レスポンス: 200 OK, body: { items: [...], total: N }  
  - POST /api/orders  
    - 説明: 注文作成  
    - リクエスト: { user_id, items: [{ product_id, qty }], payment_method }  
    - レスポンス: 201 Created, body: { order_id }

---

## 11. セキュリティ要件
- HTTPS 必須（全ページリダイレクト）  
- パスワードは bcrypt でハッシュ化  
- CSRF対策: トークン利用  
- 入力バリデーションとサニタイズ（XSS対策）  
- 脆弱性スキャンの実施頻度: リリース前および四半期毎

---

## 12. テスト方針
- **単体テスト**: カバレッジ 70% 目安  
- **統合テスト**: 主要APIフローを網羅  
- **E2Eテスト**: 重要ユーザージャーニー（登録→購入）  
- **パフォーマンステスト**: 負荷試験（同時2000ユーザーでレスポンス計測）  
- **受け入れ基準**: 全ての必須機能が受入環境で動作し、主要KPIが想定値を満たすこと

---

## 13. 運用・監視・バックアップ
- **監視**: エラーレート、レイテンシ、CPU/メモリ、ディスク使用率  
- **アラート閾値**: 例: 5xx エラー率 > 1% で通知  
- **バックアップ**: DB 日次バックアップ、保持期間 30日  
- **障害対応フロー**: 連絡先・手順・ロール切替

---

## 14. リリース計画
- **マイルストーン**: 要件確定 → 設計 → 実装 → テスト → UAT → 本番  
- **リリースチェックリスト**: 各項目を列挙（ドメイン、証明書、DNS、監視設定、ロールバック手順）

---

## 15. 役割と責任（RACI）
- **プロジェクトオーナー**: S.K
- **プロダクトマネージャー**: S.K
- **開発リード**: S.K
- **デザインチーム**: S.K
- **QA**: S.K
- **運用**: S.K

---

## 16. リスクと対応策
- **リスク 1**: 要件の凍結が遅れる → **対応**: フェーズ分割でMVPを先行  
- **リスク 2**: 外部APIの遅延 → **対応**: タイムアウトとフォールバック設計

---

## 17. 成果物と納品
- 仕様書（このドキュメント）  
- ワイヤー・デザインファイル  
- APIドキュメント（OpenAPI等）  
- データベーススキーマ  
- テスト報告書

---

## 18. 付録
- **用語集**:  
- **参考資料**: デザインガイドライン等  
- **ライセンス**:

---

## CHANGELOG
- v1.0 2025-10-30 初版
